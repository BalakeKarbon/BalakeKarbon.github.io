00000000  3c 68 74 6d 6c 20 6c 61  6e 67 3d 22 65 6e 67 22  |<html lang="eng"|
00000010  3e 0a 3c 68 65 61 64 3e  0a 09 3c 6d 65 74 61 20  |>.<head>..<meta |
00000020  63 68 61 72 73 65 74 3d  22 75 74 66 2d 38 22 2f  |charset="utf-8"/|
00000030  3e 0a 09 3c 74 69 74 6c  65 3e 77 65 62 2d 70 6f  |>..<title>web-po|
00000040  72 74 66 6f 6c 69 6f 3c  2f 74 69 74 6c 65 3e 0a  |rtfolio</title>.|
00000050  3c 2f 68 65 61 64 3e 0a  3c 62 6f 64 79 3e 0a 09  |</head>.<body>..|
00000060  3c 64 69 76 20 69 64 3d  27 74 65 72 6d 69 6e 61  |<div id='termina|
00000070  6c 2d 63 6f 6e 74 61 69  6e 65 72 27 3e 3c 2f 64  |l-container'></d|
00000080  69 76 3e 0a 09 3c 6e 6f  73 63 72 69 70 74 3e 59  |iv>..<noscript>Y|
00000090  6f 75 20 61 72 65 20 65  78 74 72 61 20 63 6f 6f  |ou are extra coo|
000000a0  6c 20 62 65 63 61 75 73  65 20 77 68 61 74 65 76  |l because whatev|
000000b0  65 72 20 79 6f 75 20 61  72 65 20 76 69 65 77 69  |er you are viewi|
000000c0  6e 67 20 74 68 69 73 20  6f 6e 20 64 6f 65 73 20  |ng this on does |
000000d0  6e 6f 74 20 73 75 70 70  6f 72 74 20 6a 61 76 61  |not support java|
000000e0  73 63 72 69 70 74 21 3c  2f 6e 6f 73 63 72 69 70  |script!</noscrip|
000000f0  74 3e 0a 09 3c 73 63 72  69 70 74 20 73 72 63 3d  |t>..<script src=|
00000100  22 2f 62 61 73 65 2e 6a  73 22 3e 3c 2f 73 63 72  |"/base.js"></scr|
00000110  69 70 74 3e 0a 09 3c 73  63 72 69 70 74 3e 0a 09  |ipt>..<script>..|
00000120  09 66 75 6e 63 74 69 6f  6e 20 61 64 6a 75 73 74  |.function adjust|
00000130  53 63 61 6c 65 28 29 20  7b 0a 09 09 09 69 66 28  |Scale() {....if(|
00000140  77 69 6e 64 6f 77 2e 69  6e 6e 65 72 48 65 69 67  |window.innerHeig|
00000150  68 74 20 3c 20 28 77 69  6e 64 6f 77 2e 69 6e 6e  |ht < (window.inn|
00000160  65 72 57 69 64 74 68 2a  30 2e 37 35 29 29 20 7b  |erWidth*0.75)) {|
00000170  0a 09 09 09 09 64 6f 63  75 6d 65 6e 74 2e 67 65  |.....document.ge|
00000180  74 45 6c 65 6d 65 6e 74  42 79 49 64 28 27 74 65  |tElementById('te|
00000190  72 6d 69 6e 61 6c 2d 63  6f 6e 74 61 69 6e 65 72  |rminal-container|
000001a0  27 29 2e 73 74 79 6c 65  2e 77 69 64 74 68 3d 77  |').style.width=w|
000001b0  69 6e 64 6f 77 2e 69 6e  6e 65 72 48 65 69 67 68  |indow.innerHeigh|
000001c0  74 2a 31 2e 33 33 33 33  33 33 33 33 33 33 33 33  |t*1.333333333333|
000001d0  33 33 33 33 3b 0a 09 09  09 09 64 6f 63 75 6d 65  |3333;.....docume|
000001e0  6e 74 2e 67 65 74 45 6c  65 6d 65 6e 74 42 79 49  |nt.getElementByI|
000001f0  64 28 27 74 65 72 6d 69  6e 61 6c 2d 63 6f 6e 74  |d('terminal-cont|
00000200  61 69 6e 65 72 27 29 2e  73 74 79 6c 65 2e 68 65  |ainer').style.he|
00000210  69 67 68 74 3d 77 69 6e  64 6f 77 2e 69 6e 6e 65  |ight=window.inne|
00000220  72 48 65 69 67 68 74 3b  0a 09 09 09 09 64 6f 63  |rHeight;.....doc|
00000230  75 6d 65 6e 74 2e 67 65  74 45 6c 65 6d 65 6e 74  |ument.getElement|
00000240  42 79 49 64 28 27 74 65  72 6d 69 6e 61 6c 2d 63  |ById('terminal-c|
00000250  6f 6e 74 61 69 6e 65 72  27 29 2e 73 74 79 6c 65  |ontainer').style|
00000260  2e 6d 61 72 67 69 6e 4c  65 66 74 3d 28 28 77 69  |.marginLeft=((wi|
00000270  6e 64 6f 77 2e 69 6e 6e  65 72 57 69 64 74 68 2d  |ndow.innerWidth-|
00000280  28 77 69 6e 64 6f 77 2e  69 6e 6e 65 72 48 65 69  |(window.innerHei|
00000290  67 68 74 2a 31 2e 33 33  33 33 33 33 33 33 33 33  |ght*1.3333333333|
000002a0  33 33 33 33 33 33 29 29  2f 32 29 2b 27 70 78 27  |333333))/2)+'px'|
000002b0  3b 0a 09 09 09 7d 20 65  6c 73 65 20 7b 0a 09 09  |;....} else {...|
000002c0  09 09 64 6f 63 75 6d 65  6e 74 2e 67 65 74 45 6c  |..document.getEl|
000002d0  65 6d 65 6e 74 42 79 49  64 28 27 74 65 72 6d 69  |ementById('termi|
000002e0  6e 61 6c 2d 63 6f 6e 74  61 69 6e 65 72 27 29 2e  |nal-container').|
000002f0  73 74 79 6c 65 2e 77 69  64 74 68 3d 77 69 6e 64  |style.width=wind|
00000300  6f 77 2e 69 6e 6e 65 72  57 69 64 74 68 3b 0a 09  |ow.innerWidth;..|
00000310  09 09 09 64 6f 63 75 6d  65 6e 74 2e 67 65 74 45  |...document.getE|
00000320  6c 65 6d 65 6e 74 42 79  49 64 28 27 74 65 72 6d  |lementById('term|
00000330  69 6e 61 6c 2d 63 6f 6e  74 61 69 6e 65 72 27 29  |inal-container')|
00000340  2e 73 74 79 6c 65 2e 68  65 69 67 68 74 3d 77 69  |.style.height=wi|
00000350  6e 64 6f 77 2e 69 6e 6e  65 72 57 69 64 74 68 2a  |ndow.innerWidth*|
00000360  30 2e 37 35 3b 0a 09 09  09 09 64 6f 63 75 6d 65  |0.75;.....docume|
00000370  6e 74 2e 67 65 74 45 6c  65 6d 65 6e 74 42 79 49  |nt.getElementByI|
00000380  64 28 27 74 65 72 6d 69  6e 61 6c 2d 63 6f 6e 74  |d('terminal-cont|
00000390  61 69 6e 65 72 27 29 2e  73 74 79 6c 65 2e 6d 61  |ainer').style.ma|
000003a0  72 67 69 6e 4c 65 66 74  3d 27 30 25 27 3b 0a 09  |rginLeft='0%';..|
000003b0  09 09 7d 3b 0a 09 09 7d  0a 09 09 2f 2f 49 20 57  |..};...}...//I W|
000003c0  49 53 48 20 49 20 57 41  53 20 57 52 49 54 49 4e  |ISH I WAS WRITIN|
000003d0  47 20 49 4e 20 4a 41 56  41 21 0a 09 09 76 61 72  |G IN JAVA!...var|
000003e0  20 66 6f 6e 74 53 69 7a  65 3d 32 30 3b 0a 09 09  | fontSize=20;...|
000003f0  76 61 72 20 74 65 72 6d  69 6e 61 6c 53 63 72 65  |var terminalScre|
00000400  65 6e 42 6f 72 64 65 72  3d 31 30 3b 0a 09 09 76  |enBorder=10;...v|
00000410  61 72 20 72 6f 77 73 3d  28 34 30 30 2d 28 74 65  |ar rows=(400-(te|
00000420  72 6d 69 6e 61 6c 53 63  72 65 65 6e 42 6f 72 64  |rminalScreenBord|
00000430  65 72 2a 32 29 29 2f 66  6f 6e 74 53 69 7a 65 3b  |er*2))/fontSize;|
00000440  0a 09 09 76 61 72 20 63  6f 6c 73 3d 28 35 30 30  |...var cols=(500|
00000450  2d 28 74 65 72 6d 69 6e  61 6c 53 63 72 65 65 6e  |-(terminalScreen|
00000460  42 6f 72 64 65 72 2a 32  29 29 2f 28 66 6f 6e 74  |Border*2))/(font|
00000470  53 69 7a 65 2f 32 29 3b  0a 09 09 76 61 72 20 73  |Size/2);...var s|
00000480  63 72 6f 6c 6c 3d 30 3b  0a 09 09 76 61 72 20 74  |croll=0;...var t|
00000490  65 72 6d 69 6e 61 6c 4c  69 6e 6b 73 3d 5b 6e 75  |erminalLinks=[nu|
000004a0  6c 6c 5d 3b 20 2f 2f 53  65 74 75 70 20 6c 69 6e  |ll]; //Setup lin|
000004b0  6b 73 20 66 69 72 73 74  20 74 68 65 6e 20 72 65  |ks first then re|
000004c0  76 65 72 74 20 62 61 63  6b 20 74 6f 20 74 68 65  |vert back to the|
000004d0  6d 21 0a 09 09 76 61 72  20 74 65 72 6d 69 6e 61  |m!...var termina|
000004e0  6c 42 75 66 66 65 72 3d  5b 5d 3b 20 2f 2f 41 72  |lBuffer=[]; //Ar|
000004f0  72 61 79 20 6f 66 20 73  74 72 69 6e 67 73 20 77  |ray of strings w|
00000500  69 74 68 20 74 68 65 20  6c 65 6e 67 74 68 20 6f  |ith the length o|
00000510  66 20 63 6f 6c 73 20 61  6c 6f 6e 67 20 77 69 74  |f cols along wit|
00000520  68 20 69 6e 74 65 67 65  72 20 61 72 72 61 79 20  |h integer array |
00000530  72 65 66 65 72 65 6e 63  69 6e 67 20 6c 69 6e 6b  |referencing link|
00000540  73 2e 0a 09 09 76 61 72  20 74 79 70 65 52 61 74  |s....var typeRat|
00000550  65 3d 31 3b 0a 09 09 76  61 72 20 74 65 72 6d 69  |e=1;...var termi|
00000560  6e 61 6c 42 75 73 79 3d  66 61 6c 73 65 3b 0a 09  |nalBusy=false;..|
00000570  09 76 61 72 20 74 65 72  6d 69 6e 61 6c 43 61 6e  |.var terminalCan|
00000580  76 61 73 3d 64 6f 63 75  6d 65 6e 74 2e 63 72 65  |vas=document.cre|
00000590  61 74 65 45 6c 65 6d 65  6e 74 28 22 63 61 6e 76  |ateElement("canv|
000005a0  61 73 22 29 3b 0a 09 09  76 61 72 20 74 65 72 6d  |as");...var term|
000005b0  69 6e 61 6c 43 6f 6e 74  65 78 74 3d 74 65 72 6d  |inalContext=term|
000005c0  69 6e 61 6c 43 61 6e 76  61 73 2e 67 65 74 43 6f  |inalCanvas.getCo|
000005d0  6e 74 65 78 74 28 22 32  64 22 29 3b 0a 09 09 74  |ntext("2d");...t|
000005e0  65 72 6d 69 6e 61 6c 43  61 6e 76 61 73 2e 77 69  |erminalCanvas.wi|
000005f0  64 74 68 3d 35 30 30 3b  0a 09 09 74 65 72 6d 69  |dth=500;...termi|
00000600  6e 61 6c 43 61 6e 76 61  73 2e 68 65 69 67 68 74  |nalCanvas.height|
00000610  3d 34 30 30 3b 0a 09 09  74 65 72 6d 69 6e 61 6c  |=400;...terminal|
00000620  43 61 6e 76 61 73 2e 73  74 79 6c 65 2e 70 6f 73  |Canvas.style.pos|
00000630  69 74 69 6f 6e 3d 27 61  62 73 6f 6c 75 74 65 27  |ition='absolute'|
00000640  3b 0a 09 09 74 65 72 6d  69 6e 61 6c 43 61 6e 76  |;...terminalCanv|
00000650  61 73 2e 73 74 79 6c 65  2e 74 6f 70 3d 27 34 2e  |as.style.top='4.|
00000660  31 36 36 36 36 36 36 36  36 36 36 36 36 36 36 34  |1666666666666664|
00000670  25 27 3b 0a 09 09 74 65  72 6d 69 6e 61 6c 43 61  |%';...terminalCa|
00000680  6e 76 61 73 2e 73 74 79  6c 65 2e 6c 65 66 74 3d  |nvas.style.left=|
00000690  27 39 2e 33 37 35 25 27  3b 0a 09 09 74 65 72 6d  |'9.375%';...term|
000006a0  69 6e 61 6c 43 61 6e 76  61 73 2e 73 74 79 6c 65  |inalCanvas.style|
000006b0  2e 77 69 64 74 68 3d 27  36 32 2e 35 25 27 3b 0a  |.width='62.5%';.|
000006c0  09 09 74 65 72 6d 69 6e  61 6c 43 61 6e 76 61 73  |..terminalCanvas|
000006d0  2e 73 74 79 6c 65 2e 68  65 69 67 68 74 3d 27 36  |.style.height='6|
000006e0  36 2e 36 36 36 36 36 36  36 36 36 36 36 36 36 37  |6.66666666666667|
000006f0  25 27 3b 0a 09 09 76 61  72 20 64 65 70 6c 65 74  |%';...var deplet|
00000700  69 6f 6e 49 6e 74 65 72  76 61 6c 3d 32 30 3b 0a  |ionInterval=20;.|
00000710  09 09 76 61 72 20 64 65  70 6c 65 74 69 6f 6e 53  |..var depletionS|
00000720  69 7a 65 3d 35 3b 0a 09  09 76 61 72 20 72 72 67  |ize=5;...var rrg|
00000730  62 3d 5b 30 2c 33 30 2c  30 5d 3b 0a 09 09 66 75  |b=[0,30,0];...fu|
00000740  6e 63 74 69 6f 6e 20 64  65 70 6c 65 74 65 28 29  |nction deplete()|
00000750  20 7b 0a 09 09 09 76 61  72 20 73 63 72 65 65 6e  | {....var screen|
00000760  49 6d 61 67 65 44 61 74  61 20 3d 20 74 65 72 6d  |ImageData = term|
00000770  69 6e 61 6c 43 6f 6e 74  65 78 74 2e 67 65 74 49  |inalContext.getI|
00000780  6d 61 67 65 44 61 74 61  28 30 2c 30 2c 74 65 72  |mageData(0,0,ter|
00000790  6d 69 6e 61 6c 43 61 6e  76 61 73 2e 77 69 64 74  |minalCanvas.widt|
000007a0  68 2c 74 65 72 6d 69 6e  61 6c 43 61 6e 76 61 73  |h,terminalCanvas|
000007b0  2e 68 65 69 67 68 74 29  3b 0a 09 09 20 20 66 6f  |.height);...  fo|
000007c0  72 28 76 61 72 20 63 70  3d 30 3b 63 70 3c 73 63  |r(var cp=0;cp<sc|
000007d0  72 65 65 6e 49 6d 61 67  65 44 61 74 61 2e 64 61  |reenImageData.da|
000007e0  74 61 2e 6c 65 6e 67 74  68 3b 63 70 2b 3d 34 29  |ta.length;cp+=4)|
000007f0  20 7b 0a 09 09 20 20 20  20 66 6f 72 28 76 61 72  | {...    for(var|
00000800  20 63 63 3d 30 3b 63 63  3c 33 3b 63 63 2b 2b 29  | cc=0;cc<3;cc++)|
00000810  20 7b 0a 09 09 20 20 20  20 20 20 69 66 28 73 63  | {...      if(sc|
00000820  72 65 65 6e 49 6d 61 67  65 44 61 74 61 2e 64 61  |reenImageData.da|
00000830  74 61 5b 63 70 2b 63 63  5d 21 3d 72 72 67 62 5b  |ta[cp+cc]!=rrgb[|
00000840  63 63 5d 29 20 7b 0a 09  09 20 20 20 20 20 20 09  |cc]) {...      .|
00000850  76 61 72 20 64 69 66 66  3d 73 63 72 65 65 6e 49  |var diff=screenI|
00000860  6d 61 67 65 44 61 74 61  2e 64 61 74 61 5b 63 70  |mageData.data[cp|
00000870  2b 63 63 5d 2d 72 72 67  62 5b 63 63 5d 3b 0a 09  |+cc]-rrgb[cc];..|
00000880  09 20 20 20 20 20 20 20  20 69 66 28 64 69 66 66  |.        if(diff|
00000890  3e 30 29 20 7b 0a 09 09  20 20 20 20 20 20 20 20  |>0) {...        |
000008a0  20 20 69 66 28 64 65 70  6c 65 74 69 6f 6e 53 69  |  if(depletionSi|
000008b0  7a 65 3c 4d 61 74 68 2e  61 62 73 28 64 69 66 66  |ze<Math.abs(diff|
000008c0  29 29 20 7b 0a 09 09 20  20 20 20 20 20 20 20 20  |)) {...         |
000008d0  20 09 73 63 72 65 65 6e  49 6d 61 67 65 44 61 74  | .screenImageDat|
000008e0  61 2e 64 61 74 61 5b 63  70 2b 63 63 5d 2d 3d 64  |a.data[cp+cc]-=d|
000008f0  65 70 6c 65 74 69 6f 6e  53 69 7a 65 3b 0a 09 09  |epletionSize;...|
00000900  20 20 20 20 20 20 20 20  20 20 7d 20 65 6c 73 65  |          } else|
00000910  20 7b 0a 09 09 20 20 20  20 20 20 20 20 20 20 09  | {...          .|
00000920  73 63 72 65 65 6e 49 6d  61 67 65 44 61 74 61 2e  |screenImageData.|
00000930  64 61 74 61 5b 63 70 2b  63 63 5d 2d 3d 64 69 66  |data[cp+cc]-=dif|
00000940  66 3b 0a 09 09 20 20 20  20 20 20 20 20 20 20 7d  |f;...          }|
00000950  0a 09 09 20 20 20 20 20  20 20 20 7d 20 65 6c 73  |...        } els|
00000960  65 20 69 66 28 64 69 66  66 3c 30 29 20 7b 0a 09  |e if(diff<0) {..|
00000970  09 20 20 20 20 20 20 20  20 09 69 66 28 64 65 70  |.        .if(dep|
00000980  6c 65 74 69 6f 6e 53 69  7a 65 3c 4d 61 74 68 2e  |letionSize<Math.|
00000990  61 62 73 28 64 69 66 66  29 29 20 7b 0a 09 09 20  |abs(diff)) {... |
000009a0  20 20 20 20 20 20 20 20  20 09 73 63 72 65 65 6e  |         .screen|
000009b0  49 6d 61 67 65 44 61 74  61 2e 64 61 74 61 5b 63  |ImageData.data[c|
000009c0  70 2b 63 63 5d 2b 3d 64  65 70 6c 65 74 69 6f 6e  |p+cc]+=depletion|
000009d0  53 69 7a 65 3b 0a 09 09  20 20 20 20 20 20 20 20  |Size;...        |
000009e0  20 20 7d 20 65 6c 73 65  20 7b 0a 09 09 20 20 20  |  } else {...   |
000009f0  20 20 20 20 20 20 20 09  73 63 72 65 65 6e 49 6d  |       .screenIm|
00000a00  61 67 65 44 61 74 61 2e  64 61 74 61 5b 63 70 2b  |ageData.data[cp+|
00000a10  63 63 5d 2b 3d 64 69 66  66 3b 0a 09 09 20 20 20  |cc]+=diff;...   |
00000a20  20 20 20 20 20 20 20 7d  0a 09 09 20 20 20 20 20  |       }...     |
00000a30  20 20 20 7d 0a 09 09 20  20 20 20 20 20 7d 0a 09  |   }...      }..|
00000a40  09 20 20 20 20 7d 0a 09  09 20 20 7d 0a 09 09 20  |.    }...  }... |
00000a50  20 74 65 72 6d 69 6e 61  6c 43 6f 6e 74 65 78 74  | terminalContext|
00000a60  2e 70 75 74 49 6d 61 67  65 44 61 74 61 28 73 63  |.putImageData(sc|
00000a70  72 65 65 6e 49 6d 61 67  65 44 61 74 61 2c 30 2c  |reenImageData,0,|
00000a80  30 29 3b 0a 09 09 7d 0a  09 09 74 65 72 6d 69 6e  |0);...}...termin|
00000a90  61 6c 43 6f 6e 74 65 78  74 2e 66 69 6c 6c 53 74  |alContext.fillSt|
00000aa0  79 6c 65 20 3d 20 22 23  30 30 46 46 30 30 22 3b  |yle = "#00FF00";|
00000ab0  0a 09 09 74 65 72 6d 69  6e 61 6c 43 6f 6e 74 65  |...terminalConte|
00000ac0  78 74 2e 66 69 6c 6c 52  65 63 74 28 30 2c 20 30  |xt.fillRect(0, 0|
00000ad0  2c 20 74 65 72 6d 69 6e  61 6c 43 61 6e 76 61 73  |, terminalCanvas|
00000ae0  2e 77 69 64 74 68 2c 20  74 65 72 6d 69 6e 61 6c  |.width, terminal|
00000af0  43 61 6e 76 61 73 2e 68  65 69 67 68 74 29 3b 0a  |Canvas.height);.|
00000b00  09 09 73 65 74 49 6e 74  65 72 76 61 6c 28 64 65  |..setInterval(de|
00000b10  70 6c 65 74 65 2c 64 65  70 6c 65 74 69 6f 6e 49  |plete,depletionI|
00000b20  6e 74 65 72 76 61 6c 29  3b 0a 09 09 76 61 72 20  |nterval);...var |
00000b30  74 65 72 6d 69 6e 61 6c  43 75 72 73 6f 72 20 3d  |terminalCursor =|
00000b40  20 7b 0a 09 09 09 78 3a  30 2c 0a 09 09 09 79 3a  | {....x:0,....y:|
00000b50  30 0a 09 09 7d 3b 0a 09  09 76 61 72 20 74 65 72  |0...};...var ter|
00000b60  6d 69 6e 61 6c 4c 69 6e  65 73 3d 5b 5d 3b 0a 09  |minalLines=[];..|
00000b70  09 66 75 6e 63 74 69 6f  6e 20 69 6e 69 74 54 65  |.function initTe|
00000b80  72 6d 69 6e 61 6c 4c 69  6e 65 73 28 29 20 7b 0a  |rminalLines() {.|
00000b90  09 09 09 74 65 72 6d 69  6e 61 6c 4c 69 6e 65 73  |...terminalLines|
00000ba0  3d 5b 5d 3b 0a 09 09 09  76 61 72 20 74 6c 69 3d  |=[];....var tli=|
00000bb0  30 3b 0a 09 09 09 69 66  28 74 65 72 6d 69 6e 61  |0;....if(termina|
00000bc0  6c 4c 69 6e 65 73 2e 6c  65 6e 67 74 68 21 3d 30  |lLines.length!=0|
00000bd0  29 20 7b 0a 09 09 09 09  66 6f 72 28 74 6c 69 3d  |) {.....for(tli=|
00000be0  28 74 65 72 6d 69 6e 61  6c 4c 69 6e 65 73 2e 6c  |(terminalLines.l|
00000bf0  65 6e 67 74 68 2d 31 29  3b 74 6c 69 3e 3d 30 3b  |ength-1);tli>=0;|
00000c00  74 6c 69 2d 2d 29 20 7b  0a 09 09 09 09 09 74 65  |tli--) {......te|
00000c10  72 6d 69 6e 61 6c 4c 69  6e 65 73 5b 74 6c 69 5d  |rminalLines[tli]|
00000c20  2e 72 65 6d 6f 76 65 28  29 0a 09 09 09 09 09 74  |.remove()......t|
00000c30  65 72 6d 69 6e 61 6c 4c  69 6e 65 73 2e 70 6f 70  |erminalLines.pop|
00000c40  28 29 3b 0a 09 09 09 09  7d 0a 09 09 09 7d 0a 09  |();.....}....}..|
00000c50  09 09 66 6f 72 28 74 6c  69 3d 30 3b 74 6c 69 3c  |..for(tli=0;tli<|
00000c60  72 6f 77 73 3b 74 6c 69  2b 2b 29 20 7b 0a 09 09  |rows;tli++) {...|
00000c70  09 09 76 61 72 20 6e 65  77 4c 69 6e 65 20 3d 20  |..var newLine = |
00000c80  64 6f 63 75 6d 65 6e 74  2e 63 72 65 61 74 65 45  |document.createE|
00000c90  6c 65 6d 65 6e 74 4e 53  28 27 68 74 74 70 3a 2f  |lementNS('http:/|
00000ca0  2f 77 77 77 2e 77 33 2e  6f 72 67 2f 32 30 30 30  |/www.w3.org/2000|
00000cb0  2f 73 76 67 27 2c 27 74  65 78 74 27 29 3b 0a 09  |/svg','text');..|
00000cc0  09 09 09 6e 65 77 4c 69  6e 65 2e 73 65 74 41 74  |...newLine.setAt|
00000cd0  74 72 69 62 75 74 65 28  27 78 27 2c 37 35 2b 74  |tribute('x',75+t|
00000ce0  65 72 6d 69 6e 61 6c 53  63 72 65 65 6e 42 6f 72  |erminalScreenBor|
00000cf0  64 65 72 29 3b 0a 09 09  09 09 6e 65 77 4c 69 6e  |der);.....newLin|
00000d00  65 2e 73 65 74 41 74 74  72 69 62 75 74 65 28 27  |e.setAttribute('|
00000d10  79 27 2c 32 35 2b 28 28  74 65 72 6d 69 6e 61 6c  |y',25+((terminal|
00000d20  53 63 72 65 65 6e 42 6f  72 64 65 72 2b 28 28 74  |ScreenBorder+((t|
00000d30  6c 69 29 2a 66 6f 6e 74  53 69 7a 65 29 29 2b 66  |li)*fontSize))+f|
00000d40  6f 6e 74 53 69 7a 65 29  29 3b 0a 09 09 09 09 6e  |ontSize));.....n|
00000d50  65 77 4c 69 6e 65 2e 73  65 74 41 74 74 72 69 62  |ewLine.setAttrib|
00000d60  75 74 65 28 27 73 74 79  6c 65 27 2c 27 66 6f 6e  |ute('style','fon|
00000d70  74 2d 73 69 7a 65 3a 27  2b 66 6f 6e 74 53 69 7a  |t-size:'+fontSiz|
00000d80  65 2b 27 70 78 3b 66 6f  6e 74 2d 66 61 6d 69 6c  |e+'px;font-famil|
00000d90  79 3a 6c 6f 63 61 6c 55  6e 69 66 6f 6e 74 3b 66  |y:localUnifont;f|
00000da0  69 6c 6c 3a 23 30 30 46  46 30 30 3b 66 69 6c 6c  |ill:#00FF00;fill|
00000db0  2d 6f 70 61 63 69 74 79  3a 31 3b 73 74 72 6f 6b  |-opacity:1;strok|
00000dc0  65 3a 6e 6f 6e 65 3b 73  74 72 6f 6b 65 2d 77 69  |e:none;stroke-wi|
00000dd0  64 74 68 3a 30 2e 30 27  29 3b 0a 09 09 09 09 6e  |dth:0.0');.....n|
00000de0  65 77 4c 69 6e 65 2e 74  65 78 74 43 6f 6e 74 65  |ewLine.textConte|
00000df0  6e 74 3d 27 27 3b 0a 09  09 09 09 64 6f 63 75 6d  |nt='';.....docum|
00000e00  65 6e 74 2e 67 65 74 45  6c 65 6d 65 6e 74 42 79  |ent.getElementBy|
00000e10  49 64 28 27 74 65 72 6d  69 6e 61 6c 27 29 2e 69  |Id('terminal').i|
00000e20  6e 73 65 72 74 42 65 66  6f 72 65 28 6e 65 77 4c  |nsertBefore(newL|
00000e30  69 6e 65 2c 64 6f 63 75  6d 65 6e 74 2e 67 65 74  |ine,document.get|
00000e40  45 6c 65 6d 65 6e 74 42  79 49 64 28 27 74 65 72  |ElementById('ter|
00000e50  6d 69 6e 61 6c 27 29 2e  66 69 72 73 74 43 68 69  |minal').firstChi|
00000e60  6c 64 29 3b 0a 09 09 09  09 74 65 72 6d 69 6e 61  |ld);.....termina|
00000e70  6c 4c 69 6e 65 73 2e 70  75 73 68 28 6e 65 77 4c  |lLines.push(newL|
00000e80  69 6e 65 29 3b 0a 09 09  09 7d 0a 09 09 7d 0a 09  |ine);....}...}..|
00000e90  09 66 75 6e 63 74 69 6f  6e 20 61 64 6a 75 73 74  |.function adjust|
00000ea0  46 6f 6e 74 28 6e 65 77  53 69 7a 65 29 20 7b 0a  |Font(newSize) {.|
00000eb0  09 09 09 66 6f 6e 74 53  69 7a 65 3d 6e 65 77 53  |...fontSize=newS|
00000ec0  69 7a 65 3b 0a 09 09 09  72 6f 77 73 3d 28 34 30  |ize;....rows=(40|
00000ed0  30 2d 28 74 65 72 6d 69  6e 61 6c 53 63 72 65 65  |0-(terminalScree|
00000ee0  6e 42 6f 72 64 65 72 2a  32 29 29 2f 66 6f 6e 74  |nBorder*2))/font|
00000ef0  53 69 7a 65 3b 0a 09 09  09 63 6f 6c 73 3d 28 35  |Size;....cols=(5|
00000f00  30 30 2d 28 74 65 72 6d  69 6e 61 6c 53 63 72 65  |00-(terminalScre|
00000f10  65 6e 42 6f 72 64 65 72  2a 32 29 29 2f 28 66 6f  |enBorder*2))/(fo|
00000f20  6e 74 53 69 7a 65 2f 32  29 3b 0a 09 09 09 74 65  |ntSize/2);....te|
00000f30  72 6d 69 6e 61 6c 42 75  66 66 65 72 3d 5b 5d 3b  |rminalBuffer=[];|
00000f40  20 2f 2f 52 65 73 65 74  20 42 75 66 66 65 72 21  | //Reset Buffer!|
00000f50  0a 09 09 09 74 65 72 6d  69 6e 61 6c 43 75 72 73  |....terminalCurs|
00000f60  6f 72 2e 78 3d 30 3b 0a  09 09 09 74 65 72 6d 69  |or.x=0;....termi|
00000f70  6e 61 6c 43 75 72 73 6f  72 2e 79 3d 30 3b 0a 09  |nalCursor.y=0;..|
00000f80  09 7d 0a 09 09 76 61 72  20 6c 69 6e 65 49 6e 64  |.}...var lineInd|
00000f90  65 78 3d 30 3b 0a 09 09  76 61 72 20 6c 69 6e 65  |ex=0;...var line|
00000fa0  53 74 6f 70 3d 30 3b 0a  09 09 66 75 6e 63 74 69  |Stop=0;...functi|
00000fb0  6f 6e 20 72 65 6e 64 65  72 28 29 20 7b 0a 09 09  |on render() {...|
00000fc0  09 69 66 28 74 65 72 6d  69 6e 61 6c 42 75 66 66  |.if(terminalBuff|
00000fd0  65 72 2e 6c 65 6e 67 74  68 3c 3d 72 6f 77 73 29  |er.length<=rows)|
00000fe0  20 7b 0a 09 09 09 09 73  63 72 6f 6c 6c 3d 30 3b  | {.....scroll=0;|
00000ff0  0a 09 09 09 7d 0a 09 09  09 6c 69 6e 65 49 6e 64  |....}....lineInd|
00001000  65 78 3d 28 74 65 72 6d  69 6e 61 6c 42 75 66 66  |ex=(terminalBuff|
00001010  65 72 2e 6c 65 6e 67 74  68 2d 31 29 2d 73 63 72  |er.length-1)-scr|
00001020  6f 6c 6c 3b 0a 09 09 09  6c 69 6e 65 53 74 6f 70  |oll;....lineStop|
00001030  3d 6c 69 6e 65 49 6e 64  65 78 2d 28 72 6f 77 73  |=lineIndex-(rows|
00001040  2d 31 29 3b 0a 09 09 09  69 66 28 6c 69 6e 65 53  |-1);....if(lineS|
00001050  74 6f 70 3c 30 29 20 7b  0a 09 09 09 09 6c 69 6e  |top<0) {.....lin|
00001060  65 53 74 6f 70 3d 30 3b  0a 09 09 09 7d 0a 09 09  |eStop=0;....}...|
00001070  09 77 68 69 6c 65 28 6c  69 6e 65 49 6e 64 65 78  |.while(lineIndex|
00001080  3e 3d 6c 69 6e 65 53 74  6f 70 29 20 7b 0a 09 09  |>=lineStop) {...|
00001090  09 09 74 65 72 6d 69 6e  61 6c 4c 69 6e 65 73 5b  |..terminalLines[|
000010a0  6c 69 6e 65 49 6e 64 65  78 2d 6c 69 6e 65 53 74  |lineIndex-lineSt|
000010b0  6f 70 5d 2e 69 6e 6e 65  72 48 54 4d 4c 3d 27 27  |op].innerHTML=''|
000010c0  3b 0a 09 09 09 09 74 65  72 6d 69 6e 61 6c 4c 69  |;.....terminalLi|
000010d0  6e 65 73 5b 6c 69 6e 65  49 6e 64 65 78 2d 6c 69  |nes[lineIndex-li|
000010e0  6e 65 53 74 6f 70 5d 5b  31 5d 3d 5b 5d 3b 0a 09  |neStop][1]=[];..|
000010f0  09 09 09 76 61 72 20 63  75 72 54 65 78 74 3d 74  |...var curText=t|
00001100  65 72 6d 69 6e 61 6c 42  75 66 66 65 72 5b 6c 69  |erminalBuffer[li|
00001110  6e 65 49 6e 64 65 78 5d  3b 0a 09 09 09 09 66 6f  |neIndex];.....fo|
00001120  72 28 76 61 72 20 63 75  72 43 68 61 72 3d 30 3b  |r(var curChar=0;|
00001130  63 75 72 43 68 61 72 3c  63 6f 6c 73 3b 63 75 72  |curChar<cols;cur|
00001140  43 68 61 72 2b 2b 29 20  7b 0a 09 09 09 09 09 69  |Char++) {......i|
00001150  66 28 63 75 72 54 65 78  74 5b 30 5d 2e 6c 65 6e  |f(curText[0].len|
00001160  67 74 68 3e 63 75 72 43  68 61 72 29 20 7b 0a 09  |gth>curChar) {..|
00001170  09 09 09 09 09 74 65 72  6d 69 6e 61 6c 43 6f 6e  |.....terminalCon|
00001180  74 65 78 74 2e 66 69 6c  6c 54 65 78 74 28 63 75  |text.fillText(cu|
00001190  72 54 65 78 74 5b 30 5d  5b 63 75 72 43 68 61 72  |rText[0][curChar|
000011a0  5d 2c 74 65 72 6d 69 6e  61 6c 53 63 72 65 65 6e  |],terminalScreen|
000011b0  42 6f 72 64 65 72 2b 28  28 66 6f 6e 74 53 69 7a  |Border+((fontSiz|
000011c0  65 2f 32 29 2a 63 75 72  43 68 61 72 29 2c 28 74  |e/2)*curChar),(t|
000011d0  65 72 6d 69 6e 61 6c 53  63 72 65 65 6e 42 6f 72  |erminalScreenBor|
000011e0  64 65 72 2b 28 28 6c 69  6e 65 49 6e 64 65 78 2d  |der+((lineIndex-|
000011f0  6c 69 6e 65 53 74 6f 70  29 2a 66 6f 6e 74 53 69  |lineStop)*fontSi|
00001200  7a 65 29 29 2b 66 6f 6e  74 53 69 7a 65 29 3b 0a  |ze))+fontSize);.|
00001210  09 09 09 09 09 09 76 61  72 20 6e 65 77 4c 69 6e  |......var newLin|
00001220  6b 20 3d 20 64 6f 63 75  6d 65 6e 74 2e 63 72 65  |k = document.cre|
00001230  61 74 65 45 6c 65 6d 65  6e 74 4e 53 28 27 68 74  |ateElementNS('ht|
00001240  74 70 3a 2f 2f 77 77 77  2e 77 33 2e 6f 72 67 2f  |tp://www.w3.org/|
00001250  32 30 30 30 2f 73 76 67  27 2c 27 74 73 70 61 6e  |2000/svg','tspan|
00001260  27 29 3b 0a 09 09 09 09  09 09 69 66 28 63 75 72  |');.......if(cur|
00001270  54 65 78 74 5b 31 5d 5b  63 75 72 43 68 61 72 5d  |Text[1][curChar]|
00001280  21 3d 30 29 20 7b 0a 09  09 09 09 09 09 09 6e 65  |!=0) {........ne|
00001290  77 4c 69 6e 6b 2e 6f 6e  63 6c 69 63 6b 3d 74 65  |wLink.onclick=te|
000012a0  72 6d 69 6e 61 6c 4c 69  6e 6b 73 5b 63 75 72 54  |rminalLinks[curT|
000012b0  65 78 74 5b 31 5d 5b 63  75 72 43 68 61 72 5d 5d  |ext[1][curChar]]|
000012c0  3b 0a 09 09 09 09 09 09  7d 0a 09 09 09 09 09 09  |;.......}.......|
000012d0  69 66 28 63 75 72 54 65  78 74 5b 30 5d 2e 63 68  |if(curText[0].ch|
000012e0  61 72 41 74 28 63 75 72  43 68 61 72 29 3d 3d 27  |arAt(curChar)=='|
000012f0  20 27 29 20 7b 0a 09 09  09 09 09 09 09 6e 65 77  | ') {........new|
00001300  4c 69 6e 6b 2e 69 6e 6e  65 72 48 54 4d 4c 2b 3d  |Link.innerHTML+=|
00001310  27 26 6e 62 73 70 3b 27  3b 0a 09 09 09 09 09 09  |'&nbsp;';.......|
00001320  7d 20 65 6c 73 65 20 7b  0a 09 09 09 09 09 09 09  |} else {........|
00001330  6e 65 77 4c 69 6e 6b 2e  69 6e 6e 65 72 48 54 4d  |newLink.innerHTM|
00001340  4c 2b 3d 63 75 72 54 65  78 74 5b 30 5d 2e 63 68  |L+=curText[0].ch|
00001350  61 72 41 74 28 63 75 72  43 68 61 72 29 3b 0a 09  |arAt(curChar);..|
00001360  09 09 09 09 09 7d 0a 09  09 09 09 09 09 74 65 72  |.....}.......ter|
00001370  6d 69 6e 61 6c 4c 69 6e  65 73 5b 6c 69 6e 65 49  |minalLines[lineI|
00001380  6e 64 65 78 2d 6c 69 6e  65 53 74 6f 70 5d 2e 61  |ndex-lineStop].a|
00001390  70 70 65 6e 64 43 68 69  6c 64 28 6e 65 77 4c 69  |ppendChild(newLi|
000013a0  6e 6b 29 3b 0a 09 09 09  09 09 7d 0a 09 09 09 09  |nk);......}.....|
000013b0  7d 0a 09 09 09 09 6c 69  6e 65 49 6e 64 65 78 2d  |}.....lineIndex-|
000013c0  2d 3b 0a 09 09 09 7d 0a  09 09 7d 0a 09 09 66 75  |-;....}...}...fu|
000013d0  6e 63 74 69 6f 6e 20 67  65 74 43 75 72 72 65 6e  |nction getCurren|
000013e0  74 4c 69 6e 65 28 29 20  7b 0a 09 09 09 69 66 28  |tLine() {....if(|
000013f0  74 65 72 6d 69 6e 61 6c  43 75 72 73 6f 72 2e 79  |terminalCursor.y|
00001400  3e 72 6f 77 73 29 20 7b  0a 09 09 09 09 74 65 72  |>rows) {.....ter|
00001410  6d 69 6e 61 6c 43 75 72  73 6f 72 2e 79 3d 72 6f  |minalCursor.y=ro|
00001420  77 73 3b 0a 09 09 09 7d  20 65 6c 73 65 20 69 66  |ws;....} else if|
00001430  28 74 65 72 6d 69 6e 61  6c 43 75 72 73 6f 72 2e  |(terminalCursor.|
00001440  79 3c 30 29 20 7b 0a 09  09 09 09 74 65 72 6d 69  |y<0) {.....termi|
00001450  6e 61 6c 43 75 72 73 6f  72 2e 79 3d 30 3b 0a 09  |nalCursor.y=0;..|
00001460  09 09 7d 0a 09 09 09 69  66 28 74 65 72 6d 69 6e  |..}....if(termin|
00001470  61 6c 43 75 72 73 6f 72  2e 78 3e 63 6f 6c 73 29  |alCursor.x>cols)|
00001480  20 7b 0a 09 09 09 09 74  65 72 6d 69 6e 61 6c 43  | {.....terminalC|
00001490  75 72 73 6f 72 2e 78 3d  63 6f 6c 73 3b 0a 09 09  |ursor.x=cols;...|
000014a0  09 7d 20 65 6c 73 65 20  69 66 28 74 65 72 6d 69  |.} else if(termi|
000014b0  6e 61 6c 43 75 72 73 6f  72 2e 78 3c 30 29 20 7b  |nalCursor.x<0) {|
000014c0  0a 09 09 09 09 74 65 72  6d 69 6e 61 6c 43 75 72  |.....terminalCur|
000014d0  73 6f 72 2e 78 3d 30 3b  0a 09 09 09 7d 0a 09 09  |sor.x=0;....}...|
000014e0  09 77 68 69 6c 65 28 74  65 72 6d 69 6e 61 6c 42  |.while(terminalB|
000014f0  75 66 66 65 72 5b 74 65  72 6d 69 6e 61 6c 43 75  |uffer[terminalCu|
00001500  72 73 6f 72 2e 79 5d 3d  3d 6e 75 6c 6c 29 20 7b  |rsor.y]==null) {|
00001510  0a 09 09 09 09 74 65 72  6d 69 6e 61 6c 42 75 66  |.....terminalBuf|
00001520  66 65 72 2e 70 75 73 68  28 5b 27 27 2c 5b 5d 5d  |fer.push(['',[]]|
00001530  29 3b 0a 09 09 09 7d 0a  09 09 09 66 6f 72 28 76  |);....}....for(v|
00001540  61 72 20 63 62 6c 69 3d  30 3b 63 62 6c 69 3c 63  |ar cbli=0;cbli<c|
00001550  6f 6c 73 3b 63 62 6c 69  2b 2b 29 20 7b 0a 09 09  |ols;cbli++) {...|
00001560  09 09 74 65 72 6d 69 6e  61 6c 42 75 66 66 65 72  |..terminalBuffer|
00001570  5b 74 65 72 6d 69 6e 61  6c 42 75 66 66 65 72 2e  |[terminalBuffer.|
00001580  6c 65 6e 67 74 68 2d 31  5d 5b 31 5d 2e 70 75 73  |length-1][1].pus|
00001590  68 28 30 29 3b 0a 09 09  09 7d 0a 09 09 09 76 61  |h(0);....}....va|
000015a0  72 20 6f 66 66 73 65 74  52 6f 77 3d 30 3b 0a 09  |r offsetRow=0;..|
000015b0  09 09 69 66 28 74 65 72  6d 69 6e 61 6c 42 75 66  |..if(terminalBuf|
000015c0  66 65 72 2e 6c 65 6e 67  74 68 3c 3d 72 6f 77 73  |fer.length<=rows|
000015d0  29 20 7b 0a 09 09 09 09  6f 66 66 73 65 74 52 6f  |) {.....offsetRo|
000015e0  77 3d 74 65 72 6d 69 6e  61 6c 43 75 72 73 6f 72  |w=terminalCursor|
000015f0  2e 79 3b 0a 09 09 09 7d  20 65 6c 73 65 20 7b 0a  |.y;....} else {.|
00001600  09 09 09 09 6f 66 66 73  65 74 52 6f 77 3d 28 28  |....offsetRow=((|
00001610  74 65 72 6d 69 6e 61 6c  42 75 66 66 65 72 2e 6c  |terminalBuffer.l|
00001620  65 6e 67 74 68 2d 31 29  2d 72 6f 77 73 29 2b 74  |ength-1)-rows)+t|
00001630  65 72 6d 69 6e 61 6c 43  75 72 73 6f 72 2e 79 3b  |erminalCursor.y;|
00001640  0a 09 09 09 7d 0a 09 09  09 76 61 72 20 63 75 72  |....}....var cur|
00001650  4c 69 6e 65 3d 74 65 72  6d 69 6e 61 6c 42 75 66  |Line=terminalBuf|
00001660  66 65 72 5b 6f 66 66 73  65 74 52 6f 77 5d 3b 0a  |fer[offsetRow];.|
00001670  09 09 09 77 68 69 6c 65  28 63 75 72 4c 69 6e 65  |...while(curLine|
00001680  5b 30 5d 2e 6c 65 6e 67  74 68 3c 74 65 72 6d 69  |[0].length<termi|
00001690  6e 61 6c 43 75 72 73 6f  72 2e 78 29 20 7b 0a 09  |nalCursor.x) {..|
000016a0  09 09 09 63 75 72 4c 69  6e 65 5b 30 5d 2b 3d 27  |...curLine[0]+='|
000016b0  20 27 3b 0a 09 09 09 09  63 75 72 4c 69 6e 65 5b  | ';.....curLine[|
000016c0  31 5d 2e 70 75 73 68 28  30 29 3b 0a 09 09 09 7d  |1].push(0);....}|
000016d0  0a 09 09 09 72 65 74 75  72 6e 20 5b 63 75 72 4c  |....return [curL|
000016e0  69 6e 65 2c 6f 66 66 73  65 74 52 6f 77 5d 3b 0a  |ine,offsetRow];.|
000016f0  09 09 7d 0a 09 09 66 75  6e 63 74 69 6f 6e 20 73  |..}...function s|
00001700  65 74 43 68 61 72 28 63  68 61 72 2c 6c 69 6e 6b  |etChar(char,link|
00001710  29 20 7b 0a 09 09 09 69  66 28 74 65 72 6d 69 6e  |) {....if(termin|
00001720  61 6c 42 75 73 79 3d 3d  66 61 6c 73 65 29 20 7b  |alBusy==false) {|
00001730  0a 09 09 09 09 74 65 72  6d 69 6e 61 6c 42 75 73  |.....terminalBus|
00001740  79 3d 74 72 75 65 3b 0a  09 09 09 09 76 61 72 20  |y=true;.....var |
00001750  63 75 72 4c 69 6e 65 3d  67 65 74 43 75 72 72 65  |curLine=getCurre|
00001760  6e 74 4c 69 6e 65 28 29  3b 0a 09 09 09 09 63 75  |ntLine();.....cu|
00001770  72 4c 69 6e 65 5b 30 5d  5b 30 5d 3d 63 75 72 4c  |rLine[0][0]=curL|
00001780  69 6e 65 5b 30 5d 5b 30  5d 2e 73 75 62 73 74 72  |ine[0][0].substr|
00001790  28 30 2c 20 74 65 72 6d  69 6e 61 6c 43 75 72 73  |(0, terminalCurs|
000017a0  6f 72 2e 78 29 20 2b 20  63 68 61 72 2b 20 63 75  |or.x) + char+ cu|
000017b0  72 4c 69 6e 65 5b 30 5d  5b 30 5d 2e 73 75 62 73  |rLine[0][0].subs|
000017c0  74 72 28 74 65 72 6d 69  6e 61 6c 43 75 72 73 6f  |tr(terminalCurso|
000017d0  72 2e 78 20 2b 20 31 29  3b 0a 09 09 09 09 63 75  |r.x + 1);.....cu|
000017e0  72 4c 69 6e 65 5b 30 5d  5b 31 5d 5b 74 65 72 6d  |rLine[0][1][term|
000017f0  69 6e 61 6c 43 75 72 73  6f 72 2e 78 5d 3d 6c 69  |inalCursor.x]=li|
00001800  6e 6b 3b 0a 09 09 09 09  74 65 72 6d 69 6e 61 6c  |nk;.....terminal|
00001810  42 75 73 79 3d 66 61 6c  73 65 3b 0a 09 09 09 7d  |Busy=false;....}|
00001820  0a 09 09 7d 0a 09 09 66  75 6e 63 74 69 6f 6e 20  |...}...function |
00001830  77 72 69 74 65 28 74 53  74 72 69 6e 67 2c 6c 69  |write(tString,li|
00001840  6e 6b 2c 71 75 69 63 6b  29 20 7b 0a 09 09 09 69  |nk,quick) {....i|
00001850  66 28 74 65 72 6d 69 6e  61 6c 42 75 73 79 3d 3d  |f(terminalBusy==|
00001860  66 61 6c 73 65 29 20 7b  0a 09 09 09 09 74 65 72  |false) {.....ter|
00001870  6d 69 6e 61 6c 42 75 73  79 3d 74 72 75 65 3b 0a  |minalBusy=true;.|
00001880  09 09 09 09 76 61 72 20  6e 65 77 4c 69 6e 65 73  |....var newLines|
00001890  3d 5b 27 27 5d 3b 0a 09  09 09 09 76 61 72 20 66  |=[''];.....var f|
000018a0  6c 6c 3d 74 65 72 6d 69  6e 61 6c 43 75 72 73 6f  |ll=terminalCurso|
000018b0  72 2e 79 3b 0a 09 09 09  09 76 61 72 20 63 6c 73  |r.y;.....var cls|
000018c0  3d 27 27 3b 0a 09 09 09  09 76 61 72 20 6e 6c 69  |='';.....var nli|
000018d0  3d 30 3b 0a 09 09 09 09  76 61 72 20 63 63 3d 66  |=0;.....var cc=f|
000018e0  6c 6c 3b 0a 09 09 09 09  76 61 72 20 63 63 69 3d  |ll;.....var cci=|
000018f0  30 3b 0a 09 09 09 09 66  6f 72 28 63 63 69 3d 30  |0;.....for(cci=0|
00001900  3b 63 63 69 3c 74 53 74  72 69 6e 67 2e 6c 65 6e  |;cci<tString.len|
00001910  67 74 68 3b 63 63 69 2b  2b 29 20 7b 0a 09 09 09  |gth;cci++) {....|
00001920  09 09 69 66 28 74 53 74  72 69 6e 67 2e 63 68 61  |..if(tString.cha|
00001930  72 41 74 28 63 63 69 29  3d 3d 27 5c 6e 27 29 20  |rAt(cci)=='\n') |
00001940  7b 0a 09 09 09 09 09 09  6e 65 77 4c 69 6e 65 73  |{.......newLines|
00001950  2e 70 75 73 68 28 27 27  29 0a 09 09 09 09 09 09  |.push('').......|
00001960  6e 6c 69 2b 2b 3b 0a 09  09 09 09 09 09 63 63 3d  |nli++;.......cc=|
00001970  30 3b 0a 09 09 09 09 09  7d 20 65 6c 73 65 20 7b  |0;......} else {|
00001980  0a 09 09 09 09 09 09 6e  65 77 4c 69 6e 65 73 5b  |.......newLines[|
00001990  6e 6c 69 5d 2b 3d 74 53  74 72 69 6e 67 2e 63 68  |nli]+=tString.ch|
000019a0  61 72 41 74 28 63 63 69  29 3b 0a 09 09 09 09 09  |arAt(cci);......|
000019b0  09 69 66 28 63 63 3e 3d  63 6f 6c 73 29 20 7b 0a  |.if(cc>=cols) {.|
000019c0  09 09 09 09 09 09 09 6e  65 77 4c 69 6e 65 73 2e  |.......newLines.|
000019d0  70 75 73 68 28 27 27 29  0a 09 09 09 09 09 09 09  |push('')........|
000019e0  6e 6c 69 2b 2b 3b 0a 09  09 09 09 09 09 09 63 63  |nli++;........cc|
000019f0  3d 30 3b 0a 09 09 09 09  09 09 7d 20 65 6c 73 65  |=0;.......} else|
00001a00  20 7b 0a 09 09 09 09 09  09 09 63 63 2b 2b 3b 0a  | {........cc++;.|
00001a10  09 09 09 09 09 09 7d 0a  09 09 09 09 09 7d 0a 09  |......}......}..|
00001a20  09 09 09 7d 0a 09 09 09  09 74 65 72 6d 69 6e 61  |...}.....termina|
00001a30  6c 42 75 73 79 3d 66 61  6c 73 65 3b 0a 09 09 09  |lBusy=false;....|
00001a40  09 66 6f 72 28 6e 6c 69  3d 30 3b 6e 6c 69 3c 6e  |.for(nli=0;nli<n|
00001a50  65 77 4c 69 6e 65 73 2e  6c 65 6e 67 74 68 3b 6e  |ewLines.length;n|
00001a60  6c 69 2b 2b 29 20 7b 0a  09 09 09 09 09 66 6f 72  |li++) {......for|
00001a70  28 63 63 69 3d 30 3b 63  63 69 3c 6e 65 77 4c 69  |(cci=0;cci<newLi|
00001a80  6e 65 73 5b 6e 6c 69 5d  2e 6c 65 6e 67 74 68 3b  |nes[nli].length;|
00001a90  63 63 69 2b 2b 29 20 7b  0a 09 09 09 09 09 09 74  |cci++) {.......t|
00001aa0  65 72 6d 69 6e 61 6c 43  75 72 73 6f 72 2e 78 3d  |erminalCursor.x=|
00001ab0  63 63 69 3b 0a 09 09 09  09 09 09 69 66 28 6e 6c  |cci;.......if(nl|
00001ac0  69 3d 3d 30 29 20 7b 0a  09 09 09 09 09 09 09 74  |i==0) {........t|
00001ad0  65 72 6d 69 6e 61 6c 43  75 72 73 6f 72 2e 78 2b  |erminalCursor.x+|
00001ae0  3d 66 6c 6c 3b 0a 09 09  09 09 09 09 7d 0a 09 09  |=fll;.......}...|
00001af0  09 09 09 09 73 65 74 43  68 61 72 28 6e 65 77 4c  |....setChar(newL|
00001b00  69 6e 65 73 5b 6e 6c 69  5d 2e 63 68 61 72 41 74  |ines[nli].charAt|
00001b10  28 63 63 69 29 2c 6c 69  6e 6b 29 3b 0a 09 09 09  |(cci),link);....|
00001b20  09 09 7d 0a 09 09 09 09  09 69 66 28 74 65 72 6d  |..}......if(term|
00001b30  69 6e 61 6c 42 75 66 66  65 72 2e 6c 65 6e 67 74  |inalBuffer.lengt|
00001b40  68 3c 72 6f 77 73 29 20  7b 0a 09 09 09 09 09 09  |h<rows) {.......|
00001b50  74 65 72 6d 69 6e 61 6c  43 75 72 73 6f 72 2e 79  |terminalCursor.y|
00001b60  2b 2b 3b 0a 09 09 09 09  09 7d 20 65 6c 73 65 20  |++;......} else |
00001b70  69 66 28 6e 6c 69 3c 28  6e 65 77 4c 69 6e 65 73  |if(nli<(newLines|
00001b80  2e 6c 65 6e 67 74 68 2d  32 29 29 20 7b 0a 09 09  |.length-2)) {...|
00001b90  09 09 09 09 74 65 72 6d  69 6e 61 6c 43 75 72 73  |....terminalCurs|
00001ba0  6f 72 2e 79 3d 72 6f 77  73 3b 0a 09 09 09 09 09  |or.y=rows;......|
00001bb0  09 74 65 72 6d 69 6e 61  6c 42 75 66 66 65 72 2e  |.terminalBuffer.|
00001bc0  70 75 73 68 28 5b 27 27  2c 5b 5d 5d 29 3b 0a 09  |push(['',[]]);..|
00001bd0  09 09 09 09 7d 0a 09 09  09 09 7d 0a 09 09 09 7d  |....}.....}....}|
00001be0  0a 09 09 7d 0a 09 09 66  75 6e 63 74 69 6f 6e 20  |...}...function |
00001bf0  6d 61 69 6e 28 66 69 6c  65 44 61 74 61 29 20 7b  |main(fileData) {|
00001c00  0a 09 09 09 64 6f 63 75  6d 65 6e 74 2e 67 65 74  |....document.get|
00001c10  45 6c 65 6d 65 6e 74 42  79 49 64 28 27 74 65 72  |ElementById('ter|
00001c20  6d 69 6e 61 6c 2d 63 6f  6e 74 61 69 6e 65 72 27  |minal-container'|
00001c30  29 2e 69 6e 6e 65 72 48  54 4d 4c 3d 66 69 6c 65  |).innerHTML=file|
00001c40  44 61 74 61 2e 72 65 73  70 6f 6e 73 65 54 65 78  |Data.responseTex|
00001c50  74 3b 0a 09 09 09 64 6f  63 75 6d 65 6e 74 2e 67  |t;....document.g|
00001c60  65 74 45 6c 65 6d 65 6e  74 42 79 49 64 28 27 74  |etElementById('t|
00001c70  65 72 6d 69 6e 61 6c 27  29 2e 73 65 74 41 74 74  |erminal').setAtt|
00001c80  72 69 62 75 74 65 28 27  77 69 64 74 68 27 2c 27  |ribute('width','|
00001c90  31 30 30 25 27 29 3b 0a  09 09 09 64 6f 63 75 6d  |100%');....docum|
00001ca0  65 6e 74 2e 67 65 74 45  6c 65 6d 65 6e 74 42 79  |ent.getElementBy|
00001cb0  49 64 28 27 74 65 72 6d  69 6e 61 6c 27 29 2e 73  |Id('terminal').s|
00001cc0  65 74 41 74 74 72 69 62  75 74 65 28 27 68 65 69  |etAttribute('hei|
00001cd0  67 68 74 27 2c 27 31 30  30 25 27 29 3b 0a 09 09  |ght','100%');...|
00001ce0  09 64 6f 63 75 6d 65 6e  74 2e 67 65 74 45 6c 65  |.document.getEle|
00001cf0  6d 65 6e 74 42 79 49 64  28 27 74 65 72 6d 69 6e  |mentById('termin|
00001d00  61 6c 27 29 2e 73 74 79  6c 65 2e 7a 49 6e 64 65  |al').style.zInde|
00001d10  78 3d 27 2d 31 27 3b 0a  09 09 09 61 64 6a 75 73  |x='-1';....adjus|
00001d20  74 53 63 61 6c 65 28 29  3b 0a 09 09 09 64 6f 63  |tScale();....doc|
00001d30  75 6d 65 6e 74 2e 67 65  74 45 6c 65 6d 65 6e 74  |ument.getElement|
00001d40  42 79 49 64 28 27 74 65  72 6d 69 6e 61 6c 2d 63  |ById('terminal-c|
00001d50  6f 6e 74 61 69 6e 65 72  27 29 2e 69 6e 73 65 72  |ontainer').inser|
00001d60  74 42 65 66 6f 72 65 28  74 65 72 6d 69 6e 61 6c  |tBefore(terminal|
00001d70  43 61 6e 76 61 73 2c 64  6f 63 75 6d 65 6e 74 2e  |Canvas,document.|
00001d80  67 65 74 45 6c 65 6d 65  6e 74 42 79 49 64 28 27  |getElementById('|
00001d90  74 65 72 6d 69 6e 61 6c  2d 63 6f 6e 74 61 69 6e  |terminal-contain|
00001da0  65 72 27 29 2e 66 69 72  73 74 43 68 69 6c 64 29  |er').firstChild)|
00001db0  3b 0a 09 09 09 74 65 72  6d 69 6e 61 6c 43 61 6e  |;....terminalCan|
00001dc0  76 61 73 2e 73 74 79 6c  65 2e 7a 49 6e 64 65 78  |vas.style.zIndex|
00001dd0  3d 27 2d 32 27 3b 0a 09  09 09 74 65 72 6d 69 6e  |='-2';....termin|
00001de0  61 6c 43 6f 6e 74 65 78  74 2e 66 6f 6e 74 3d 66  |alContext.font=f|
00001df0  6f 6e 74 53 69 7a 65 2b  27 70 78 20 6c 6f 63 61  |ontSize+'px loca|
00001e00  6c 55 6e 69 66 6f 6e 74  27 3b 0a 09 09 09 74 65  |lUnifont';....te|
00001e10  72 6d 69 6e 61 6c 43 6f  6e 74 65 78 74 2e 66 69  |rminalContext.fi|
00001e20  6c 6c 53 74 79 6c 65 20  3d 20 27 23 30 30 66 66  |llStyle = '#00ff|
00001e30  30 30 27 3b 0a 09 09 09  69 6e 69 74 54 65 72 6d  |00';....initTerm|
00001e40  69 6e 61 6c 4c 69 6e 65  73 28 29 3b 0a 09 09 09  |inalLines();....|
00001e50  2f 2f 73 65 74 43 68 61  72 28 27 48 27 2c 30 29  |//setChar('H',0)|
00001e60  3b 0a 09 09 09 74 65 72  6d 69 6e 61 6c 4c 69 6e  |;....terminalLin|
00001e70  6b 73 2e 70 75 73 68 28  66 75 6e 63 74 69 6f 6e  |ks.push(function|
00001e80  28 29 20 7b 0a 09 09 09  09 73 63 72 6f 6c 6c 2b  |() {.....scroll+|
00001e90  2b 3b 0a 09 09 09 09 72  65 6e 64 65 72 28 29 3b  |+;.....render();|
00001ea0  0a 09 09 09 7d 29 3b 0a  09 09 09 6c 6f 61 64 46  |....});....loadF|
00001eb0  69 6c 65 28 22 72 65 73  2f 74 65 78 74 2f 6c 61  |ile("res/text/la|
00001ec0  6e 67 2f 65 6e 67 2f 74  65 73 74 2e 74 78 74 22  |ng/eng/test.txt"|
00001ed0  2c 6e 75 6c 6c 2c 66 75  6e 63 74 69 6f 6e 28 66  |,null,function(f|
00001ee0  69 6c 65 44 61 74 61 29  20 7b 0a 09 09 09 09 77  |ileData) {.....w|
00001ef0  72 69 74 65 28 66 69 6c  65 44 61 74 61 2e 72 65  |rite(fileData.re|
00001f00  73 70 6f 6e 73 65 54 65  78 74 2c 31 2c 74 72 75  |sponseText,1,tru|
00001f10  65 29 3b 0a 09 09 09 09  72 65 6e 64 65 72 28 29  |e);.....render()|
00001f20  3b 0a 09 09 09 7d 29 3b  0a 09 09 09 2f 2f 47 65  |;....});....//Ge|
00001f30  74 20 63 6f 6f 6b 69 65  20 64 61 74 61 20 68 65  |t cookie data he|
00001f40  72 65 20 61 6e 64 20 6c  6f 61 64 20 76 61 6c 75  |re and load valu|
00001f50  65 73 21 0a 0a 09 09 7d  3b 0a 09 09 6c 6f 61 64  |es!....};...load|
00001f60  46 69 6c 65 28 22 72 65  73 2f 69 6d 67 2f 74 65  |File("res/img/te|
00001f70  72 6d 69 6e 61 6c 2e 73  76 67 22 2c 6e 75 6c 6c  |rminal.svg",null|
00001f80  2c 6d 61 69 6e 29 3b 0a  09 09 77 69 6e 64 6f 77  |,main);...window|
00001f90  2e 61 64 64 45 76 65 6e  74 4c 69 73 74 65 6e 65  |.addEventListene|
00001fa0  72 28 27 72 65 73 69 7a  65 27 2c 61 64 6a 75 73  |r('resize',adjus|
00001fb0  74 53 63 61 6c 65 29 3b  0a 09 3c 2f 73 63 72 69  |tScale);..</scri|
00001fc0  70 74 3e 0a 09 3c 73 74  79 6c 65 3e 0a 09 09 40  |pt>..<style>...@|
00001fd0  66 6f 6e 74 2d 66 61 63  65 20 7b 0a 09 09 09 66  |font-face {....f|
00001fe0  6f 6e 74 2d 66 61 6d 69  6c 79 3a 20 6c 6f 63 61  |ont-family: loca|
00001ff0  6c 55 6e 69 66 6f 6e 74  3b 0a 09 09 09 73 72 63  |lUnifont;....src|
00002000  3a 20 75 72 6c 28 2f 72  65 73 2f 74 65 78 74 2f  |: url(/res/text/|
00002010  66 6f 6e 74 73 2f 75 6e  69 66 6f 6e 74 2d 31 33  |fonts/unifont-13|
00002020  2e 30 2e 30 31 2e 74 74  66 29 3b 0a 09 09 7d 0a  |.0.01.ttf);...}.|
00002030  09 09 62 6f 64 79 20 7b  0a 09 09 09 6d 61 72 67  |..body {....marg|
00002040  69 6e 3a 20 30 70 78 20  30 70 78 20 30 70 78 20  |in: 0px 0px 0px |
00002050  30 70 78 3b 0a 09 09 7d  0a 09 09 23 74 65 72 6d  |0px;...}...#term|
00002060  69 6e 61 6c 2d 63 6f 6e  74 61 69 6e 65 72 20 7b  |inal-container {|
00002070  0a 09 09 09 70 6f 73 69  74 69 6f 6e 3a 20 61 62  |....position: ab|
00002080  73 6f 6c 75 74 65 3b 0a  09 09 7d 0a 09 3c 2f 73  |solute;...}..</s|
00002090  74 79 6c 65 3e 0a 3c 2f  62 6f 64 79 3e 0a 3c 2f  |tyle>.</body>.</|
000020a0  68 74 6d 6c 3e 0a                                 |html>.|
000020a6
